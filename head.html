<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Droid+Sans' rel='stylesheet' type='text/css'>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script>
    $(document).ready(function() {
      chapters();
      crossReferences();
      epigraphs();
    });

    function chapters(){
      appendix = 0
      $("h1").each(
        function(index){
          if ( $(this).hasClass("appendix") ) {
            $(this).prepend("Appendix " + String.fromCharCode(65 + appendix++) + ". ")
          } else {
            $(this).prepend("Chapter " + (index + 1) + ". ")
          }
        }
      );
    }

    function crossReferences() {
      $("a:empty, [href^='#']").each(
        function(){
          var xid = $(this).attr("href");
          var val = $(xid).text();
          $(this).append(val)
        }
      );
    }

    function epigraphs() {
      $("blockquote.epigraph footer").prepend( "<hr>" );
    }
</script>
